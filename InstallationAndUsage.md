# Installation #

Download the zip file and unzip to any folder of your liking.

# What you need #

  * Groovy
  * War file to be instrumented

# Assumption #
  * Basic knowledge about how Cobertura works and what it means to instrument java byte code
  * This has been tested only for Tomcat

# Usage #
This runs as a groovy script.

e.g. groovy run _command_

There is a property file that comes along with it. 'cobertura.properties'. This property file needs to be modified to match your local folder structure,war file name, etc.

## Cobertura.properties ##
  * coveragereport.dir=./report     **<-The folder where the HTML report will be generated to**
  * src.dir=/path/to/src/main/java **<- Path to the src folder**
  * war.dir=/path/to/dist **<- Path to the war file**
  * war.file=application.war **<- Name of the war file**
  * instrumented.dir=./instrumented **<- Temp folder, where the instrumented file will be generated to**
  * include.regex=`.*\.mypackage.*` **<- Classes that are to be instrumented. You can use any regex.**

You can also pass a property file as a parameter. That will override the cobertura.properties.
So the command will be

groovy run _command_ _myconfig.properties_


## 1. Instrument ##
This step takes a war file as input and will then generate a war file instrumented with Cobertura. All the jar files in the war file will be instrumented (You can control what _not_ to instrument though)

**Input** :
  1. War file to be instrumented

**Output**:
  1. Instrumented war file
  1. cobertura.ser file generated by Cobertura

**command**: groovy run instrument


## 2. Test the application ##
Test the application by running manual tests or automated tests.

The .ser file generated during the instrumentation phase **must** be put in the tomcat\bin folder. Otherwise a new .ser file will be created by the web application and that cannot be used to create a coverage report.

**Input** :
  1. Instrumented war file
  1. .ser file generated by Cobertura

**Output**:
  1. cobertura.ser file updated by the web application

## 3. Generating report ##

Now its time to generate the coverage report.

**NOTE**: You will have to shut down Tomcat to get all updates persisted to the .ser file

**Input** :
  1. cobertura.ser file updated by the web application
Copy this file back to the original location - "instrumented.dir"

**Output**:
  1. HTML report

**command**: groovy run report